<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>MMC: Programming with MMC</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MMC
   </div>
   <div id="projectbrief">Metropolis MUD Client: A feature rich MUD client written in python.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Programming with MMC </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><ul><ul><li class="level3"><a href="#FirstScript">Your First Script</a><ul><li class="level4"><a href="#CommandCharacter">The Command Character</a></li>
<li class="level4"><a href="#EntryVariables">Entry Variables</a></li>
<li class="level4"><a href="#EntryExpressions">Entry Expressions</a></li>
<li class="level4"><a href="#ScriptFiles">Script Files</a></li>
</ul>
</li>
</ul>
</ul>
</ul>
</div>
<div class="textblock"><p>This page will attempt to teach you the basics of programming with MMC.</p>
<p>If you do not know <a href="http://www.python.org">Python</a>, then it is recommended you learn that first. Python is an easy to learn language, and generally yields positive results very quickly.</p>
<p>We will be using version 2.7.9.</p>
<h2>Introduction {Introduction}</h2>
<p>At the heart of MMC is the world object. As in Python, everything is an <a href="https://docs.python.org/2/tutorial/classes.html">object</a>, including the connected world, the user interface, and the triggers and aliases you define.</p>
<p>There are several ways to script in MMC, the most powerful of wich are raw Python files, which MMC refers to as Script Files, but there is a lot of stuff you can do from the entry line as well.</p>
<p>Let's dive right in:</p>
<p>Begin your command with the Command Character, which can be configured from the entry tab of the world options window.</p>
<p>By default this is a / character, so your command might look like this: </p><pre class="fragment">/print "Hello world."
</pre><p>If you've used Python before, you'll recognised the print statement. It usually prints stuff to the console. By default, MMC has redirected the <a href="http://en.wikipedia.org/wiki/Standard_streams">standard streams</a>, so any text which would usually appear on the console now appears in your output window.</p>
<p>This of course includes tracebacks or errors. Try this code: </p><pre class="fragment">/print asdf
</pre><p>You should see the following printed to your output window:</p>
<p>Traceback (most recent call last): File ".../gui/worldframe.py", line 189, in onEnter self.world.send(v) File ".../world.py", line 501, in send return self.execute(self.normalise(command[1:])) File ".../world.py", line 576, in execute eval(c, self.getEnvironment(environment)) File "errors.log", line 1, in &lt;module&gt; NameError : name 'asdf' is not defined</p>
<p>This is a long winded error. As with most pythonic errors, it's only the last line that's of interest: </p><pre class="fragment">NameError
: 
name 'asdf' is not defined
</pre><p>This shows you that nothing evaluates to asdf. Let's try something that will match. Type the following: </p><pre class="fragment">/print classes
</pre><p>You should see something like: </p><pre class="fragment">deque([])
</pre><p>This is because the world object has a property named classes.</p>
<p>This method of scripting allows you to send variables with your MUD output.</p>
<p>Imagine you wanted to send your friend the contents of the note variable you just made. You might have set it like this: </p><pre class="fragment">/world.note = 'The potion is at the house on the eastern road.'
</pre><p>Now instead of writing all that again, you could simply type: </p><pre class="fragment">tell jo @note
</pre><p>MMC would send: </p><pre class="fragment">tell jo The potion is at the house on the eastern road.
</pre><p>You can change the regular expression used for this magic in the scripting tab of world options.</p>
<p>If there is no variable matching your command, MMC simply sends the text verbatim.</p>
<p>To build upon the last section, you can also enter entire equations on the command line by enclosing them with}. For example:</p>
<p>5 + 4}</p>
<p>This would make MMC send the number 9.</p>
<p>In short, anything between the braces is treated like a <a href="http://www.secnetix.de/olli/Python/lambda_functions.hawk">Python Lambda</a>, which is a fancy word for a single line of code.</p>
<p>Lambdas are not restricted to mathematical equations however. Consider the following code: </p><pre class="fragment">/world.fruits = ['grapes', 'apples', 'oranges', 'lemons', 'bananas']
say My favourite fruits are', '.join(world.fruits)}.
</pre><p>This would give you: </p><pre class="fragment">say My favourite fruits are grapes, apples, oranges, lemons, bananas.
</pre><p>To make that more gramatically correct, we could do: </p><pre class="fragment">say My favourite fruits are', '.join(world.fruits[:-1])}, andworld.fruits[-1]}.
</pre><p>That would give you: </p><pre class="fragment">say My favourite fruits are grapes, apples, oranges, lemons, and bananas.
</pre><p>You can change the regular expression used for this magic in the scripting tab of world options.</p>
<p>Script files are by far the most powerful method of programming with MMC.</p>
<p>These files are just Python files, and are executed from inside MMC, which provides <a href="https://docs.python.org/2/library/functions.html#globals">globals</a> and <a href="https://docs.python.org/2/library/functions.html#locals">locals</a> which include the world object, the window (user interface) object, and the list of classes and triggers.</p>
<p>To have a script load each time you open your world, you need to set up your start file in the script tab of world options.</p>
<p>This file gets executed once your world is loaded, just before it connects.</p>
<p>In this way, you can instantly load triggers and aliases. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Feb 15 2015 12:47:16 for MMC by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
